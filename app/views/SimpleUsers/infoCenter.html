#{extends 'main.html' /} #{set title:user.name /}  #{include 'SimpleUsers/infoCenterTop.html' /}
<div class="row mg-top-3">
	#{include 'SimpleUsers/infoCenterNav.html' /}
	<div class="col-md-8">
		<ul class="nav nav-tabs nav-tabs1" >
			<li class="active"><a>#{if isInfoCenter} 我 #{/if}#{else} TA #{/else}的最新动态</a></li>
		</ul>
	
		<div class=" mg-top-5">
 
		
		 <div id="Searchresult"><span class="glyphicon glyphicon-refresh"></span></div>
       
       <div id="hiddenresult" style="display:none;">
			#{list items:trends,as:'trend'}
			<div class=" trend row result">
 
				#{if trend.type.equals("activity")}
				<div class="col-md-1 profile ">
					<a class="img-border img-w-5">
						<img src="${trend.orderCSSA==null?trend.orderSU.profile:trend.orderCSSA.profile}" />
					</a>
				</div>
				<div class="activity col-md-11">
					<h5 style="margin-top:0px;" class="text-muted"><a>${trend.orderCSSA==null?trend.orderSU.name:(trend.orderCSSA.school.name+"CSSA")}</a>
					${trend.action}活动：
					</h5>
				 
						 
							
							<h4><a href="@{Activities.detail(trend.a.id)}" target="_blank"> ${trend.a.name}</a></h4>
							 
						 
						 
						 
						<ul class="list-inline text-muted font-12">
						<!-- - -->
 
							  <li>发起人:<a href="">${trend.relationCSSA==null?trend.relationSU?.name:(trend.relationCSSA?.school?.name+"CSSA")} </a></li>
							
							
							<li>${trend.a.time.first().date}</li>
							<li>参加(${trend.a.joiner.size()})</li>
							
							<li> 关注(${trend.a.liker.size()})</li>
							<li> 评论(${trend.a.comment.size()})</li>
							
							
							</ul>
			
						</div>
					 	#{/if} #{elseif trend.type.equals("qa")}
			<div class=" ">
				<div class="col-md-1 profile ">
					<a class="img-border img-w-5">
						<img src="${trend.orderCSSA==null?trend.orderSU.profile:trend.orderCSSA.profile}" />
					</a>
				</div>
			<div class="activity col-md-11 text-muted">
				<h5 style="margin-top:0px;" class="text-muted">${trend.orderCSSA==null?trend.orderSU.name:(trend.orderCSSA.school.name+"CSSA")}回答了问题</h5>
			<h4><a href="@{QuestAnsw.showQuesInfo(trend.q.id)}">${trend.q.title}</a></h4>
 
			<ul class="list-inline text-muted font-12" >
							 
							<li>${trend.time}</li>
							<li> 关注(${trend.q.focusNum})</li>
							<li> 评论(${trend.q.answerNum})</li>
							
							</ul>
			</div>
					
		</div>
				#{/elseif} #{elseif trend.type.equals("fq")}
				
				<div class=" ">
				<div class="col-md-1 profile ">
					<a class="img-border img-w-5">
						<img src="${trend.orderCSSA==null?trend.orderSU.profile:trend.orderCSSA.profile}" />
					</a>
				</div>
			<div class="activity col-md-11 text-muted">
				<h5 style="margin-top:0px;" class="text-muted">${trend.orderCSSA==null?trend.orderSU.name:(trend.orderCSSA.school.name+"CSSA")}回答了问题</h5>
			<h4><a href="@{QuestAnsw.showQuesInfo(trend.q.id)}">${trend.q.title}</a></h4>
 
						 
			<ul class="list-inline text-muted font-12">
							 
							<li>${trend.time}</li>
								<li> 关注(${trend.q.focusNum})</li>
							<li> 评论(${trend.q.answerNum})</li>
							
							</ul>
			</div>
					
		</div>
				
				
				 
				#{/elseif} #{elseif trend.type.equals("addques")}
				<div class="  ">
				<div class="col-md-1 profile ">
					<a class="img-border img-w-5">
						<img src="${trend.orderCSSA==null?trend.orderSU.profile:trend.orderCSSA.profile}" />
					</a>
				</div>
			<div class="activity col-md-11 text-muted">
				<h5 style="margin-top:0px;" class="text-muted">${trend.orderCSSA==null?trend.orderSU.name:(trend.orderCSSA.school.name+"CSSA")}发布了一条问答</h5>
			<h4><a href="@{QuestAnsw.showQuesInfo(trend.q.id)}">${trend.q.title}</a></h4>
 
			<ul class="list-inline text-muted font-12" >
							 
							<li>${trend.time}</li>
								<li> 关注(${trend.q.focusNum})</li>
							<li> 评论(${trend.q.answerNum})</li>
							
							</ul>
			</div>
					
		</div>
				#{/elseif} #{elseif trend.type.equals("praise")}
				<div class="  ">
				<div class="col-md-1 profile ">
					<a class="img-border img-w-5">
						<img src="${trend.orderCSSA==null?trend.orderSU.profile:trend.orderCSSA.profile}" />
					</a>
				</div>
			<div class="activity col-md-11 text-muted">
				<h5 style="margin-top:0px;" class="text-muted">${trend.orderCSSA==null?trend.orderSU.name:(trend.orderCSSA.school.name+"CSSA")}赞了 ${trend.relationCSSA==null?trend.relationSU.name:(trend.relationCSSA.school.name+" CSSA")} </h5>
			<h4><a href="@{QuestAnsw.showQuesInfo(trend.q.id)}">${trend.q.title}</a></h4>
 
						 
			<ul class="list-inline text-muted font-12">
							 
							<li>${trend.time}</li>
								<li> 关注(${trend.q.focusNum})</li>
							<li> 评论(${trend.q.answerNum})</li>
							
							</ul>
			</div>
					
		</div>
				 
				#{/elseif}
				#{elseif trend.type.equals("wel")}
				
				
				<div class=" ">
				<div class="col-md-1 profile ">
					<a class="img-border img-w-5">
						<img src="${trend.orderCSSA==null?trend.orderSU.profile:trend.orderCSSA.profile}" />
					</a>
				</div>
			<div class="activity col-md-11 text-muted">
				<h5 style="margin-top:0px;" class="text-muted">你关注了公益活动</h5>
			<h4><a href="@{Charities.welfare(trend.w.id)}">${trend.w.title}</a></h4>
 
			<ul class="list-inline text-muted font-12">
							 
							<li>${trend.time}</li>
							<li> 关注(${trend.w.likerCount})</li>
							 
							<li>浏览(${trend.w.views})</li>
							</ul>
			</div>
					
		</div>
 
				#{/elseif}
		</div>
		#{/list}
	 </div>  
       <div id="Pagination" class="pagination"><!-- 这里显示分页--></div>  
        <div class="clearfix"></div>
    </div>
  
  </div>
  </div>
 #{set 'Scripts'}
 <script type="text/javascript" src="@{'public/javascripts/jquery.pagination.js'}"></script>
 <script type="text/javascript">
 
   
   function initPagination() {
    
     var num_entries = $("#hiddenresult div.result").length;
     // 创建分页
   
    
     $("#Pagination").pagination(num_entries, {
       num_edge_entries: 2, //边缘页数
       prev_text:"«",
       next_text:"»",
       num_display_entries: 4, //主体页数
       callback: pageselectCallback,
        
     });
    }
    
   function pageselectCallback(page_index, jq){
       $('#Searchresult').empty();
       var items_per_page = 10;
           var max_elem = Math.min((page_index+1) * items_per_page, $("#hiddenresult div.result").length);
          
           
           // Iterate through a selection of the content and build an HTML string
           for(var i=page_index*items_per_page;i<max_elem;i++)
           {
             var new_content = $("#hiddenresult div.result:eq("+i+")").clone();
             $('#Searchresult').append(new_content);
           }
           
           
     return false;
   }
    $(document).ready(function(){      
      initPagination();
      });
 
  
  
 </script>
 #{/set}

